{% extends "layout.html" %}

{% block content %}

    <style>

    .widthset {
    max-width: 200px;
    }

    .heightset {
        max-height: 200px;
    }

    tbody{
        background-color: white;
    }

    tr:nth-child(even){
        background-color: lightgray;
    }


        </style>


<div class="row">
    <div class="col-sm-3" style="padding-left: 4%; border-right: 1px inset #333; padding-bottom: 3%">

            {% if session.get('email') and session['type'] == 'COMPANY' and session.get('username_user') %}
                <h4 style=" padding-bottom: 3%">Welcome {{ session['name_employee'] }}</h4>
            {% elif session.get('email') and session['type'] == 'PRIVATE' %}
                <h4 style=" padding-bottom: 3%">Welcome {{ session['id_user'] }}</h4>
            {% endif %}

                <!-- ***************** PROFILE PIC *************** -->
            <div style="padding-left: 8%">
                {% for file in filelist %}
                    {% if file==session.get('id_user')+'/'+session.get('id_user') + '.jpg' %}
                        <img src='{{ url_for("static",filename=file) }}' class="widthset heightset img-circle">
                    {% elif file==session.get('name_employee')|string+'/'+session.get('name_employee')|string + '.jpg' %}
                        <img src='{{ url_for("static",filename=file) }}' class="widthset heightset img-circle">
                    {% endif %}

                {% endfor %}
                <form method="post" enctype="multipart/form-data" action="">
                    {{ formupload.hidden_tag() }}
                    <label class="btn btn-sm btn-warning btn-block'" style="margin-top: 0.5rem">
                        Choose file <input type="file" class="btn btn-sm btn-warning btn-block'" style="display: none;">
                        {{ formupload.file(style="display: none;") }}
                    </label>
                    {{ formupload.upload(class="btn btn-sm btn-warning btn-block'") }}
                </form>
            </div>

    </div>

  <div class="col-sm-9" style="padding-right: 4%; padding-left: 3%">


        <!-- *********************** ORDERS TABLE ************************* -->

        <h3 style="padding-bottom: 3%">{{ session.get('id_user') }} - Your current orders</h3>
    <form action="" method="post">
        <div class="table-sm">
        <table class="table table-borderless text-center">
              <colgroup>
                  <col span="6">
                  <col style="background-color:transparent!important;">
              </colgroup>
                <tr>
                  <th style="background-color: #ffc107;">ID</th>
                  <th style="background-color: #ffc107;">Description</th>
                  <th style="background-color: #ffc107;">User</th>
                  <th style="background-color: #ffc107;">Customer</th>
                  <th style="background-color: #ffc107;">Delivery date</th>
                  <th style="background-color: #ffc107;">Status</th>
                </tr>

            <tbody>
            {% for order in orders %}
                <tr><th style="color: black;">{{ order.order_id }}</th>
                <td style="color: black;">{{ order.order_description }}</td>
                <td style="color: black;">{{ order.user }}</td>
                <td style="color: black;">{% if order.order_private_customer %}
                        {{ order.order_private_customer }}
                    {% elif order.order_company_customer %}
                        {{ order.order_company_customer }}
                    {% endif %}
                </td>
                <td style="color: black;">{{ order.order_delivery_date }}</td>
                <td style="color: black;">{{ order.order_state }}</td>
                {% if session['type'] == 'COMPANY' %}
                    <td class="btn-table"><a class="btn btn-sm btn-warning btn-block" href="{{ url_for('order_management_menu',order_no=order.order_id) }}">Manage it</a></td>
                {% elif session['type'] == 'PRIVATE' %}
                    <td class="btn-table"><a class="btn btn-sm btn-warning btn-block" href="{{ url_for('talk_with_the_customer',order_no=order.order_id) }}">Manage it</a></td>
                {% endif %}
                <td>
                {% if session.get('name_employee') %}
                    {% if order.order_state == 'FINISHED' %}
                        <a class="btn btn-sm btn-warning btn-block disabled">Next Step</a></td></tr>
                    {% else %}
                        <a class="btn btn-sm btn-warning btn-block" href="{{ url_for('update_status',order_no=order.order_id) }}">Next Step</a></td></tr>
                    {% endif %}
                {% endif %}
            {% endfor %}

            </tbody>
        </table>
        </div>
    </form>

        <!-- *********************** CREATE NEW  ORDER BUTTON ************************* -->

                <div style="margin: 0px 2px 0px 2px;"></div> <!-- doesnt work -->
                {% if session['type'] == 'COMPANY' %}
                    <a class="btn btn-lg btn-warning btn-block' pull-right" href="/order_creation">Create new order</a>
                {% endif %}

</div>
</div>

{% endblock %}
